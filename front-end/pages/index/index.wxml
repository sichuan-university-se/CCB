<!--index.wxml-->
<view class="container">
  <view class="swiper-tab">
    <view class="tab-item {{ currentTab == 0 ? 'on' : '' }}" data-current="0" bindtap="switchTab">校内需求</view>
    <view class="tab-item {{ currentTab == 1 ? 'on' : '' }}" data-current="1" bindtap="switchTab">活动组队</view>
    <view class="tab-item {{ currentTab == 2 ? 'on' : '' }}" data-current="2" bindtap="switchTab">闲置交易</view>
  </view>

  <swiper class="swiper" current="{{ currentTab }}" bindchange="swiperChange" style="height: {{clientHeight?clientHeight+'px':'auto'}}">
    <swiper-item>
      <scroll-view scroll-y='true' style="height: {{clientHeight?clientHeight+'px':'auto'}}">
        <view class="swiper-item">
          <swiper class="ad-swiper shadow-blur bg-red bg-img margin" indicator-dots="true" autoplay="true" interval="3000">
            <swiper-item wx:for="{{3}}" wx:key>
              <view class="ad-swiper-item">广告位招租</view>
            </swiper-item>
          </swiper>
          <view class="text-grey bg-white shadow-warp padding-lr">
            <view class="cu-form-group">
              <view class="margin-right">
                <picker bindchange="campusChange" value="{{campusIndex}}" range="{{campusPicker}}">
                  <view class="picker">
                    {{campusIndex?campusPicker[campusIndex]:currentCampus}}
                  </view>
                </picker>
              </view>
              <input class="margin-left" placeholder="搜索"></input>
              <text class="cuIcon-search text-cyan"></text>
            </view>
          </view>
          <view class="content margin">
            <view class="cu-list menu-avatar">
              <view class="cu-item" wx:for="{{reqList}}" wx:key bindtap="checkReqDetail" data-id="{{item.id}}" data-type="req">
                <image class="cu-avatar round lg" src="/assets/image/gakki{{index}}.jpg" mode="aspectFill"></image>
                <view class="content">
                  <view class="text-grey">{{item.title}}</view>
                  <view class="text-gray text-sm flex">
                    <text class="text-cut"> {{item.detail}} </text>
                  </view>
                </view>
                <view class="action">
                  <view class="text-grey text-xs">22:20</view>
                </view>
              </view>
            </view>
          </view>
        </view>
      </scroll-view>
    </swiper-item>
    <swiper-item>
      <scroll-view scroll-y='true'>
        <view class="swiper-item">
          <swiper class="ad-swiper shadow-blur bg-red bg-img margin" indicator-dots="true" autoplay="true" interval="3000">
            <swiper-item wx:for="{{3}}" wx:key>
              <view class="ad-swiper-item">广告位招租</view>
            </swiper-item>
          </swiper>
          <view class="text-grey bg-white shadow-warp padding-lr">
            <view class="cu-form-group">
              <view class="margin-right">
                <picker bindchange="PickerChange" value="{{index}}" range="{{picker}}">
                  <view class="picker">
                    {{index?picker[index]:currentCampus}}
                  </view>
                </picker>
              </view>
              <input class="margin-left" placeholder="搜索"></input>
              <text class="cuIcon-search text-cyan"></text>
            </view>
          </view>
          <view class="content margin">
            <view class="cu-list menu-avatar">
              <view class="cu-item" wx:for="{{actList}}" wx:key bindtap="checkActDetail" data-id="{{item.id}}" data-type="act">
                <image class="cu-avatar round lg" src="/assets/image/gakki{{index}}.jpg" mode="aspectFill"></image>
                <view class="content">
                  <view class="text-grey">{{item.title}}</view>
                  <view class="text-gray text-sm flex">
                    <text class="text-cut"> {{item.detail}} </text>
                  </view>
                </view>
                <view class="action">
                  <view class="text-grey text-xs">22:20</view>
                </view>
              </view>
            </view>
          </view>
        </view>
      </scroll-view>
    </swiper-item>
    <swiper-item>
      <scroll-view scroll-y='true'>
        <view class="swiper-item">
          <swiper class="ad-swiper margin shadow-blur bg-red bg-img" indicator-dots="true" autoplay="true" interval="3000">
            <swiper-item wx:for="{{3}}" wx:key>
              <view class="ad-swiper-item">广告位招租</view>
            </swiper-item>
          </swiper>
          <view class="text-grey bg-white shadow-warp padding-lr">
            <view class="cu-form-group">
              <view class="margin-right">
                <picker bindchange="PickerChange" value="{{index}}" range="{{picker}}">
                  <view class="picker">
                    {{index?picker[index]:currentCampus}}
                  </view>
                </picker>
              </view>
              <input class="margin-left" placeholder="搜索"></input>
              <text class="cuIcon-search text-cyan"></text>
            </view>
          </view>
          <view class="content margin">
            <view class="grid col-2">
              <view wx:for="{{goodsList}}" wx:key bindtap="checkGoodsDetail" data-id="{{item.id}}">
                <view class="goods-item margin-xs">
                  <image class="goods-img padding-0" src="/assets/image/gakki{{index}}.jpg" mode="aspectFill"></image>
                  <view class="goods-info text-df padding-lr-xs">
                    {{item.title}}
                    <text class="text-price text-red goods-price">{{item.price}}</text>
                  </view>
                  <view class="goods-detail text-grey text-sm text-cut padding-lr-xs padding-bottom-xs">
                    {{item.detail}}
                  </view>
                </view>
              </view>
            </view>
          </view>
        </view>
      </scroll-view>
    </swiper-item>
  </swiper>
  <view class="cu-modal {{modalName=='RadioModal'?'show':''}}">
    <view class="cu-dialog">
      <view class="margin-sm text-lg">请选择所在校区</view>
      <radio-group class="block">
        <view class="cu-list menu text-left">
          <view class="cu-item" bindtap="setCampus" data-campus="jiangan">
            <label class="flex justify-between align-center flex-sub">
              <view class="flex-sub">江安校区</view>
              <radio class="round"></radio>
            </label>
          </view>
          <view class="cu-item" bindtap="setCampus" data-campus="wangjiang">
            <label class="flex justify-between align-center flex-sub">
              <view class="flex-sub">望江校区</view>
              <radio class="round"></radio>
            </label>
          </view>
        </view>
      </radio-group>
    </view>
  </view>

  <picker range="{{reqPicker}}" range-key="value" value="reqIndex" bindchange="releaseReq">
    <view class="release-btn picker">
      <image src="/assets/release.png" mode="aspectFit" class="release-img"></image>
    </view>
  </picker>
</view>